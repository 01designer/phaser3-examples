<!DOCTYPE html>
<html lang="en">
    <head>
        <meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
        <title>Phaser 3 Examples</title>
        <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
        <link rel="stylesheet" href="./css/bootstrap.min.css">
        <script src="./js/phaser.js"></script>
        <script src="./js/loadJSON.js"></script>
        <script src="./js/getQueryString.js"></script>
    </head>
    <body>

    <h1>Phaser 3 Examples</h1>

    <p><a href="edit.html">Sandbox</a></p>

    <div id="examplesList" class="list-group"></div>

    <script type="text/javascript">

    function createHeader (element, name)
    {
        var header = document.createElement('h2');

        header.innerText = name;

        element.appendChild(header);
    }

    function createLink (element, filename, filepath)
    {
        var link = document.createElement('a');

        filepath = filepath.replace('public/', '');

        link.href = 'edit.html?src=' + filepath;

        if (getQueryString('src') === filepath)
        {
            link.className = 'list-group-item active';
        }
        else
        {
            link.className = 'list-group-item list-group-item-action';
        }

        link.innerText = filename;

        element.appendChild(link);
    }

    loadJSON('examples.json', function (json) {

        var div = document.getElementById('examplesList');

        for (var i = 0; i < json.children.length; i++)
        {
            var folder = json.children[i];

            createHeader(div, folder.name);

            if (folder.hasOwnProperty('children'))
            {
                for (var c = 0; c < folder.children.length; c++)
                {
                    createLink(div, folder.children[c].name, folder.children[c].path);
                }
            }
        }

    });
        
    </script>

    </body>
</html>